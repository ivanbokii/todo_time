/**
 * almond 0.1.2 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(){var e,t,n;(function(r){function c(e,t){var n=t&&t.split("/"),r=o.map,i=r&&r["*"]||{},s,u,a,f,l,c,h,p,d,v;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(p=0;v=e[p];p++)if(v===".")e.splice(p,1),p-=1;else if(v===".."){if(p===1&&(e[2]===".."||e[0]===".."))return!0;p>0&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((n||i)&&r){s=e.split("/");for(p=s.length;p>0;p-=1){u=s.slice(0,p).join("/");if(n)for(d=n.length;d>0;d-=1){a=r[n.slice(0,d).join("/")];if(a){a=a[u];if(a){f=a,l=p;break}}}if(f)break;!c&&i&&i[u]&&(c=i[u],h=p)}!f&&c&&(f=c,l=h),f&&(s.splice(0,l,f),e=s.join("/"))}return e}function h(e,t){return function(){return l.apply(r,a.call(arguments,0).concat([e,t]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(t){i[e]=t}}function v(e){if(s.hasOwnProperty(e)){var t=s[e];delete s[e],u[e]=!0,f.apply(r,t)}if(!i.hasOwnProperty(e))throw new Error("No "+e);return i[e]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return o&&o.config&&o.config[e]||{}}}var i={},s={},o={},u={},a=[].slice,f,l;f=function(e,t,n,o){var a=[],f,l,c,p,y,b;o=o||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(b=0;b<t.length;b++){y=m(t[b],o),c=y.f;if(c==="require")a[b]=h(e);else if(c==="exports")a[b]=i[e]={},f=!0;else if(c==="module")l=a[b]={id:e,uri:"",exports:i[e],config:g(e)};else if(i.hasOwnProperty(c)||s.hasOwnProperty(c))a[b]=v(c);else if(y.p)y.p.load(y.n,h(o,!0),d(c),{}),a[b]=i[c];else if(!u[c])throw new Error(e+" missing "+c)}p=n.apply(i[e],a);if(e)if(l&&l.exports!==r&&l.exports!==i[e])i[e]=l.exports;else if(p!==r||!f)i[e]=p}else e&&(i[e]=n)},e=t=l=function(e,t,n,i){return typeof e=="string"?v(m(e,t).f):(e.splice||(o=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},i?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},15),l)},l.config=function(e){return o=e,l},n=function(e,t,n){t.splice||(n=t,t=[]),s[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("vendor/almond.js",function(){}),function(){n("parser",[],function(){var e;return e=function(){function e(e){this.scanner=e}return e.prototype.parse=function(){var e,t;t=[];while((e=this.scanner.nextToken()).token!=="end")t.push(e);return t},e}()})}.call(this),function(){n("char_checker",[],function(){var e;return e=function(){function e(){}return e.numberReg=/^[0-9]$/,e.alphaReg=/^[A-Za-z]$/,e.isNumber=function(e){return this.numberReg.test(e)},e.isAlpha=function(e){return this.alphaReg.test(e)},e.isColon=function(e){return e===":"},e}()})}.call(this),function(){n("input_reader",[],function(){var e;return e=function(){function e(e){this.input=e,this.position=0}return e.prototype.nextChar=function(){return this.input[this.position++]},e.prototype.currentChar=function(){return this.input[this.position]},e}()})}.call(this),function(){n("token",["input_reader","char_checker"],function(e,t){var n;return n=function(){function e(e,t,n){this.inputReader=e,this.token=t,this.checker=n,this._readTokenFrom(e)}return e.prototype.raw="",e.prototype.token=null,e.prototype.value=null,e.prototype._readTokenFrom=function(e){var n;if(this.token==="undef"||this.token==="colon"){this.raw=e.currentChar(),this.value=this.raw,e.nextChar();return}if(this.token==="end")return;while(this.checker.call(t,n=e.currentChar()))this.raw+=n,e.nextChar();return this.value=this.raw},e}()})}.call(this),function(){n("scanner",["char_checker","token"],function(e,t){var n;return n=function(){function n(e,t){this.inputReader=e,this.scannerWordsAnalyser=t,this.currentToken=null}return n.prototype.currentToken=function(){return this.currentToken},n.prototype.nextToken=function(){return this.currentToken=this._extractToken(),this.currentToken},n.prototype._extractToken=function(){var n,r;return this._skipWhitespaces(),n=this.inputReader.currentChar(),r=null,e.isNumber(n)?(r=new t(this.inputReader,"number",e.isNumber),r.value=parseInt(r.value)):e.isAlpha(n)?(r=new t(this.inputReader,"word",e.isAlpha),this.scannerWordsAnalyser.timeModifierCheck(r),this.scannerWordsAnalyser.wordNumberCheck(r),this.scannerWordsAnalyser.timeUnitCheck(r)):e.isColon(n)?r=new t(this.inputReader,"colon"):n===void 0?r=new t(this.inputReader,"end"):r=new t(this.inputReader,"undef"),r},n.prototype._skipWhitespaces=function(){var e;e=[];while(this.inputReader.currentChar()===" ")e.push(this.inputReader.nextChar());return e},n}()})}.call(this),function(){n("scanner_words_analyser",[],function(){var e;return e=function(){function e(){}return e.prototype.wordsNumbers={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eigth:8,nine:9,ten:10,eleven:11,twelve:12},e.prototype.time_units={m:["m","min","minute","minutes"],h:["h","hr","hour","hours"]},e.prototype.timeModifierCheck=function(e){if(e.raw==="am"||e.raw==="pm")return e.token="time_modifier"},e.prototype.wordNumberCheck=function(e){var t,n,r,i;r=this.wordsNumbers,i=[];for(n in r)t=r[n],n===e.raw?(e.token="number",i.push(e.value=t)):i.push(void 0);return i},e.prototype.timeUnitCheck=function(e){if(_.any(this.time_units.m,function(t){return e.raw===t}))return e.token="time_unit",e.value="m";if(_.any(this.time_units.h,function(t){return e.raw===t}))return e.token="time_unit",e.value="h"},e}()})}.call(this),function(){n("time_patterns/simple",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number colon number",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){var t,n,r,i;return t=0<=(r=e[0].value)&&r<=23,n=0<=(i=e[2].value)&&i<=59,t&&n},e.prototype.transform=function(e){var t,n;return t=e[0].value,t=t<10?"0"+t:t,n=e[2].value,n=n<10?"0"+n:n,""+t+":"+n},e}()})}.call(this),function(){n("time_patterns/simple_modifier",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number colon number time_modifier",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){var t,n,r,i;return t=0<=(r=e[0].value)&&r<=23,n=0<=(i=e[2].value)&&i<=59,t&&n},e.prototype.transform=function(e){var t,n,r;return t=e[0].value,e[3].value==="pm"&&(t=e[0].value+12),n=t,n=n<10?"0"+n:n,r=e[2].value,r=r<10?"0"+r:r,""+n+":"+r},e}()})}.call(this),function(){n("time_patterns/number",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){var t,n;return t=0<=(n=e[0].value)&&n<=23,t},e.prototype.transform=function(e){var t,n;return t=e[0].value,t=t<10?"0"+t:t,n="00",""+t+":"+n},e}()})}.call(this),function(){n("time_patterns/number_modifier",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number time_modifier",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){var t,n;return t=0<=(n=e[0].value)&&n<=23,t},e.prototype.transform=function(e){var t,n,r;return t=e[0].value,e[1].value==="pm"&&(t=e[0].value+12),n=t,n=n<10?"0"+n:n,r="00",""+n+":"+r},e}()})}.call(this),function(){n("time_patterns_analyser",["time_patterns/simple","time_patterns/simple_modifier","time_patterns/number","time_patterns/number_modifier"],function(e,t,n,r){var i;return i=function(){function i(){}return i.prototype.patterns=[new t,new e,new r,new n],i.prototype.analyse=function(e){var t,n,r,i,s,o;r=_.pluck(e,"token").join(" "),n=null,o=this.patterns;for(i=0,s=o.length;i<s;i++){t=o[i];if(t.check(r)&&t.validate(e)){n=t.transform(e);break}}return n},i}()})}.call(this),function(){n("duration_patterns/simple",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){return!0},e.prototype.transform=function(e){return e[0].value},e}()})}.call(this),function(){n("duration_patterns/simple_unit",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number time_unit",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){return!0},e.prototype.transform=function(e){var t,n,r;return n=e[0],r=e[1].value,t=n.value,r==="h"&&(t*=60),t},e}()})}.call(this),function(){n("duration_patterns/complex_unit",[],function(){var e;return e=function(){function e(){}return e.prototype.sequence="number time_unit number time_unit",e.prototype.check=function(e){return e===this.sequence},e.prototype.validate=function(e){return!0},e.prototype.transform=function(e){var t,n;return t=this._calculate(e[0].value,e[1].value),n=this._calculate(e[2].value,e[3].value),t+n},e.prototype._calculate=function(e,t){var n;return n=e,t==="h"&&(n*=60),n},e}()})}.call(this),function(){n("duration_patterns_analyser",["duration_patterns/simple","duration_patterns/simple_unit","duration_patterns/complex_unit"],function(e,t,n){var r;return r=function(){function r(){}return r.prototype.patterns=[new n,new t,new e],r.prototype.analyse=function(e){var t,n,r,i,s,o;r=_.pluck(e,"token").join(" "),n=null,o=this.patterns;for(i=0,s=o.length;i<s;i++){t=o[i];if(t.check(r)&&t.validate(e)){n=t.transform(e);break}}return n},r}()})}.call(this),function(){e(["parser","scanner","input_reader","scanner_words_analyser","time_patterns_analyser","duration_patterns_analyser"],function(e,t,n,r,i,s){return window.todo={},window.todo.time=function(s){var o,u,a,f,l,c,h;return u=new n(s),c=new r,l=new t(u,c),a=new e(l),f=a.parse(s),h=new i,o=h.analyse(f),o===null?s:o},window.todo.duration=function(i){var o,u,a,f,l,c,h;return a=new n(i),h=new r,c=new t(a,h),f=new e(c),l=f.parse(i),u=new s,o=u.analyse(l),o===null?i:o.toString()}})}.call(this),n("app.js",function(){})})()